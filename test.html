<!DOCTYPE html>
<html>
<head>
  <!--Css Scripts -->
  <link rel="stylesheet" href="./index.css">
  <!-- Font Scripts -->
    <link href='https://fonts.googleapis.com/css?family=Nothing You Could Do' rel='stylesheet'>
    <link href="https://fonts.googleapis.com/css?family=Raleway&display=swap" rel="stylesheet">
    <!--Some CSS implementation here for some reason -->
      <style>

      </style>

    <!-- Howler Scripts -->
      <script src="./howler.js"></script>
      <script>
          var backgroundSound = new Howl({
            src: ['bgSound.wav']
          });
          var alertSound = new Howl({
            src: ['alertSound.wav']
          });
          var alertSound2 = new Howl({
            src: ['alert2.wav']
          });
      </script>
  <!-- Tensorflow.js implementation -->
  <div id="webcam-container"></div>
  <div id="label-container"></div>
  <script src="https://cdn.jsdelivr.net/npm/@tensorflow/tfjs@1.3.1/dist/tf.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/@teachablemachine/image@0.8/dist/teachablemachine-image.min.js"></script>
  <script type="text/javascript">
      // the link to your model provided by Teachable Machine export panel
      const URL = "https://teachablemachine.withgoogle.com/models/urcdnqNk/";

      let model, webcam, labelContainer, maxPredictions;

      // Load the image model and setup the webcam
      async function init() {
          const modelURL = URL + "model.json";
          const metadataURL = URL + "metadata.json";

          model = await tmImage.load(modelURL, metadataURL);
          maxPredictions = model.getTotalClasses();

          const flip = true; // flip the webcam
          webcam = new tmImage.Webcam(640, 480, flip); // width, height, flip
          await webcam.setup(); // request access to the webcam
          await webcam.play();
          window.requestAnimationFrame(loop);

          // append elements to the DOM
          document.getElementById("webcam-container").appendChild(webcam.canvas);
          labelContainer = document.getElementById("label-container");
          for (let i = 0; i < maxPredictions; i++) { // and class labels
              labelContainer.appendChild(document.createElement("div"));
          }
      }

      async function loop() {
          webcam.update(); // update the webcam frame
          await predict();
          window.requestAnimationFrame(loop);
      }

      // run the webcam image through the image model
      async function predict() {
        var bh;
          const prediction = await model.predict(webcam.canvas);
          for (let i = 0; i < maxPredictions; i++) {
              var classPrediction =
                  prediction[i].className + ": " + prediction[i].probability.toFixed(2);
              labelContainer.childNodes[i].innerHTML = classPrediction;
              if (classPrediction.includes("Both Hands: 1.00")){
                    var bh = 0;
                  } else if (classPrediction.includes("No Hands: 1.00")) {
                    var bh = 1;
                };
          }
      }
    </script>
<!--Jquery fades -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
    <script>
      function checkMe()
      {
        if (window.bh = 0) {
          console.log(window.bh);
        }
        else {
          console.log("success!");
        }
      }
      function firstPage()
      {
        //Fade Ins
          $(".fade-in").fadeIn(2500);
          $( "#text1" ).delay(500).fadeIn(2500);
          $( "#text2" ).delay(1000).fadeIn(2500);
          $( "#text3" ).delay(1500).fadeIn(2500);
          $( "#text4" ).delay(2000).fadeIn(2500);
          $( "#text5" ).delay(2500).fadeIn(2500);
          $( ".btn1" ).delay(2500).fadeIn(2500);
      }
      function secondPage()
      {
        $("#text1").fadeOut(2500);
        $("#text2").fadeOut(2800);
        $("#text3").fadeOut(3000);
        $("#text4").fadeOut(3200);
        $("#text5").fadeOut(3500);
        $("button").hide();
        $("h1").animate({
              top: "0%",
              left: "+=900",
              marginLeft: "1.7in", opacity: 0.9 },2500);
        $("h1").delay(1000).fadeOut(2500);
        $( "#helptext1" ).delay(4000).fadeIn(2500);
        $( "#helptext2" ).delay(8000).fadeIn(2500);
        $( "#helptext3" ).delay(10000).fadeIn(2500);
        $( "#helptext4" ).delay(12000).fadeIn(2500);
        $( "#helptext5" ).delay(14000).fadeIn(2500);
      }
        $(document).ready(function(){
          init();
          //Fade everything out to start from black
          $( ".btn1").hide();
          $( "#text1" ).hide();
          $( "#text2" ).hide();
          $( "#text3" ).hide();
          $( "#text4" ).hide();
          $( "#text5" ).hide();
          $( "#text6" ).hide();
          $( "#text7" ).hide();
          $( "#text8" ).hide();
          $( "#text9" ).hide();
          $( "#text10" ).hide();
          $(".fade-in").hide();
          $( "#helptext1" ).hide();
          $( "#helptext2" ).hide();
          $( "#helptext3" ).hide();
          $( "#helptext4" ).hide();
          $( "#helptext5" ).hide();
          $( "#helptext6" ).hide();
          $( "#helptext7" ).hide();
          $( "#helptext8" ).hide();
          $( "#helptext9" ).hide();
          console.log("v1.6");
          firstPage();
      });
      </script>
  </head>
  <body>
    <!------------------- START OF PAGE ONE --------------------->
    <div class="fade-in" align="center">
      <br><br><br><br><br><br><br><br><br><br><br><br><br>
    <center><h1>David Weaver, for Art Processors.</h1>
      <p id="text1">In the spirit of Art Processors, I thought I'd provide a companion app for my application for the position of Digital Producer.<br>
    For this, you'll need a webcam. If you can, please read this cover letter on a computer with a webcam, and allow access when prompted.<br>
    Please check your Audio Output and Speakers.</p>
    <p id="text2"><em>A Quick Breakdown</em></p>
    <p id="text3">I've used Machine Learning through Google's Teachable Machine and Tensorflow.js to track hand positions.<br>
      You'll use this hand position input to reveal various parts of my cover letter, on the next screen.<br>
      The Audio has been built with Howler.js.
      <br>New layers will be added as you complete each gesture.
      <br>I've kept the model relatively lightweight, as I wanted to put in my application and only had a day or so to script all this up.</p>
    <p id="text4">If you don't have a webcam, <a href="./coverletter.html">click here</a>;
      You'll miss out on some of the fancy stuff though.</p>
      <p id="text5">I hope you enjoy.</p>
      <!--Button for fading and continuing -->
    <button class="btn1" onclick="alertSound.play(); secondPage();">Continue.</button></center></div>

    <!------------------- END OF PAGE ONE --------------------->
  </body>
</html>
